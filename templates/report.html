{% extends "base.html" %}
{% block content %}

<div class="main-container container">
    <div class="file-section">
        <h1>Upload Medical Report</h1>
        <div class="form-section">
            <i class='bx bxs-cloud-upload'></i>
            <span>Select an file to upload</span>
            <p>(.png,.jpg,.jpeg,.pdf,.docx,.txt)</p>
            <form action="/upload" method="POST" enctype="multipart/form-data">
            <div style="display: flex; flex-direction: row; gap: 20px;">
                <div class="fileInput">
                    <label for="cbc_report">CBC Report</label>
                    <input 
                     onchange="updateFileName('cbc_report')"
                     type="file" 
                     accept=".png,.jpg,.jpeg,.pdf,.docx,.txt" 
                     name="cbc_report" 
                     id="cbc_report"
                    >
                </div>
                <div class="fileInput">
                    <label for="xray_report">XRAY Report</label>
                    <input 
                     onchange="updateFileName('xray_report')"
                     type="file" 
                     accept=".png,.jpg,.jpeg,.pdf,.docx,.txt" 
                     name="xray_report" 
                     id="xray_report"
                    >
                </div>
            </div>
            <div class="upload_buttons">
                <button type="submit" id="upload">Upload</button>
            </div>
            </form>
        </div>
        <span id="uploaded-file">No file choosen</span>
    </div>
    {% if output %}
    <div class="file-section">
        <p>{{ output }}</p>
    </div>
    {% endif %}
</div>

<script>

    const uploadBox = document.querySelector(".form-section");
    const fileInput = document.getElementById('fileInput');
    console.log(fileInput)

    const fileSpan = document.getElementById('uploaded-file');

    uploadBox.addEventListener('click', (e) => {
        fileInput.click();
    });

    function updateFileName(name){
        const inputFile = document.getElementById(name);
        console.log(inputFile);

        const value = inputFile.files.length > 0 ? inputFile.files[0].name : "No File choosen";

        console.log(value);

        fileSpan.textContent = value;
    }
    
</script>

{% endblock %}
