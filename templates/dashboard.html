{% extends "base.html" %}
{% block content %}
    <div class="main-container">
        <div class="container">
            <div class="dash-head">
                <div style="display: flex; flex-direction: column;">
                    <h1 style="font-size: 25px; font-weight: 700;">Hello, Kundan</h1>
                    <span style="font-size: 13px; color: rgb(163, 164, 165); font-weight: 400;">You're doing great! Keep up the good work</span>
                </div>
                <div style="display: flex; flex-direction: row; gap: 25px; align-items: center;">
                    <div class="search-bar" style="display: flex;align-items: center;padding: 0px 20px; border-width: 1px; border-radius: 30px; border-color: rgb(182, 182, 182); border-style: solid;">
                        <i class="bx bx-search"></i>
                        <input style="outline: none; border: none; background-color: #e4e9f7; padding: 10px 15px; font-size: 15px; width: 250px;" type="text" placeholder="Search...">
                    </div>
                    <div style="border-width: 1px; border-style: solid; border-color: rgb(182, 182, 182); border-radius: 50%;display: flex; justify-content: center; align-items: center;">
                        <i style="font-size: 20px; padding: 10px;" class='bx bx-chat icon'></i>
                    </div>
                </div>
            </div>

            <div class="dash-content">
                <div class="section-1">
                    <div class="stats">
                        <div class="stats-card">
                            <div class="details">
                                <img src="../staticFolder/images__1_-removebg-preview.png" alt="heart-icon">
                                <div class="readings">
                                    <h1>Temperature</h1>
                                    <span>102/60</span>
                                </div>
                            </div>
                            <img style="margin-top: -45px;" src="../staticFolder/png-transparent-line-chart-multicolored-miscellaneous-infographic-angle-thumbnail-removebg-preview.png" alt="">
                        </div>
                        <div class="stats-card">
                            <div class="details">
                                <img src="../staticFolder/human-being-heart-Premium-vector-PNG-removebg-preview.png" alt="heart-icon">
                                <div class="readings">
                                    <h1>Heart Rate</h1>
                                    <span>124 bpm</span>
                                </div>
                            </div>
                            <img src="../staticFolder/heart-beat-ecg.png" alt="">
                        </div>
                        <div class="stats-card">
                            <div class="details">
                                <img src="../staticFolder/images__2_-removebg-preview.png" alt="heart-icon">
                                <div class="readings">
                                    <h1>Glucose</h1>
                                    <span>102/60</span>
                                </div>
                            </div>
                            <img src="../staticFolder/images-removebg-preview.png" alt="">
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: column; flex-wrap: wrap;gap: 15px; padding: 20px; width: 700px; border-width: 1px; border-style: solid; border-color: rgb(205, 205, 205); border-radius: 20px;">
                        <div style="display: flex; flex-direction: column;">
                            <h1 style="font-size: 20px; font-weight: 600;">Body Conditions</h1>
                            <span style="font-size: 17px; color: rgb(163, 164, 165); font-weight: 400;">124</span>
                        </div>
                        <div class="stats">
                            <div style="width: 320px; height: 250px;" class="stats-card">
                                <div class="details">
                                    <div class="readings">
                                        <h1>Weight</h1>
                                        <span>Lost 1.0kg</span>
                                    </div>
                                </div>
                                <div style="width: 300px;">
                                    <canvas id="lineChart"></canvas>
                                </div>
                            </div>
                            <div style="width: 310px; height: 250px;" class="stats-card">
                                    <div class="details">
                                        <div class="readings">
                                            <h1>Calories Intake</h1>
                                            <span>2000kcal</span>
                                        </div>
                                    </div>
                                    <div style="width: 270px;">
                                        <canvas id="barChart"></canvas>
                                    </div>
                            </div>
                            <div class="activity-card">
                                <h3>Activity</h3>
                                <p class="steps-left">654 Steps left</p>
                                <div class="progress-container">
                                    <svg class="progress-ring" width="120" height="120">
                                        <circle class="progress-ring__background" cx="60" cy="60" r="54" />
                                        <circle class="progress-ring__circle" cx="60" cy="60" r="54" />
                                    </svg>
                                    <div class="step-count">
                                        <span id="step-count">7324</span>
                                        <p>Steps</p>
                                    </div>
                                </div>
                                <p class="goal">10,000 Steps</p>
                            </div> 
                            <div style="width: 410px; height: 250px;" class="stats-card">
                                <div class="details">
                                    <div class="readings">
                                        <h1>Sleep Time</h1>
                                        <span>8 Hours</span>
                                    </div>
                                </div>
                                <div style="width: 350px; margin-top: -20px;">
                                    <canvas id="lineChart2"></canvas>
                                </div>
                            </div>                          
                        </div>
                    </div>
                </div>
                <div>
                    <!-- <div class="model" style="width: 150px; height: 100vh;">
                        <spline-viewer 
                        url="https://prod.spline.design/InciWTmX49Eq1Pgx/scene.splinecode">
                        </spline-viewer>
                    </div> -->
                    <div style="background-color: aqua; width: 500px; height: 100vh;">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="https://unpkg.com/@splinetool/viewer@1.9.28/build/spline-viewer.js"></script>
<script>
    // Total and current step values
    const totalSteps = 10000;
    const currentSteps = 7324;

    // Calculate progress percentage
    const progressCircle = document.querySelector('.progress-ring__circle');
    const radius = progressCircle.r.baseVal.value;
    const circumference = 2 * Math.PI * radius;

    // Set circle properties
    progressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
    progressCircle.style.strokeDashoffset = circumference;

    // Update progress dynamically
    const stepPercentage = (currentSteps / totalSteps) * 100;
    const offset = circumference - (stepPercentage / 100) * circumference;
    progressCircle.style.strokeDashoffset = offset;


    const bar = document.getElementById('barChart');
    // const pie = document.getElementById('pieChart');
    const line = document.getElementById('lineChart');
    const line2 = document.getElementById('lineChart2');

    const barData = {
    labels: ['Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat', 'Sun'],
    datasets: [{
        label: 'Daily Calories Count',
        data: [2000, 2100, 2050, 2101, 1990, 2500, 1945],
        backgroundColor: [
        'rgba(255, 99, 132)',
        'rgba(255, 159, 64)',
        'rgba(255, 205, 86)',
        'rgba(75, 192, 192)',
        'rgba(54, 162, 235)',
        'rgba(153, 102, 255)',
        'rgba(201, 203, 207)'
        ],
        borderColor: [
        'rgb(255, 99, 132)',
        'rgb(255, 159, 64)',
        'rgb(255, 205, 86)',
        'rgb(75, 192, 192)',
        'rgb(54, 162, 235)',
        'rgb(153, 102, 255)',
        'rgb(201, 203, 207)'
        ],
        borderWidth: 1,
    }]
    };
    
    new Chart(bar, {
        type: 'bar',
        data: barData,
        options: {
        scales: {
            y: {
            beginAtZero: true
            }
        }
        }
    });

    // const pieData = {
    // labels: [
    //     'Red',
    //     'Blue',
    //     'Yellow'
    // ],
    // datasets: [{
    //     label: 'My First Dataset',
    //     data: [300, 50, 100],
    //     backgroundColor: [
    //     'rgb(255, 99, 132)',
    //     'rgb(54, 162, 235)',
    //     'rgb(255, 205, 86)'
    //     ],
    //     hoverOffset: 10
    // }]
    // };

    // new Chart(pie, {
    //     type: 'doughnut',
    //     data: pieData,
    // });

    const lineData = {
    labels: ['Day1', 'Day2', 'Day3', 'Day4', 'Day5', 'Day6', 'Day7'],
    datasets: [{
        label: 'This Week',
        data: [88, 87, 89, 90, 88, 89, 87],
        fill: false,
        borderColor: 'rgb(75, 192, 192)',
        tension: 0.1
    }]
    };

    const lineData2 = {
    labels: ['Day1', 'Day2', 'Day3', 'Day4', 'Day5', 'Day6', 'Day7'],
    datasets: [{
        label: 'This Week',
        data: [8.5, 7, 7.5, 6, 8, 7.5, 9],
        fill: false,
        borderColor: '#695cfe',
        tension: 0.1
    }]
    };

    new Chart(line, {
        type: 'line',
        data: lineData,
    })

    new Chart(line2, {
        type: 'line',
        data: lineData2,
    })

</script>

{% endblock %}